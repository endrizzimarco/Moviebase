.row
  -unless @movies.nil?
    -@movies.each do |movie|
      .col-sm-2.col-md-3
        .thumbnail.img-responsive
          %a{href: "/movies/#{movie.id}"}
            -if action_name == 'index' # View for saved movies (my movies, favourites)
              %img{src: "#{movie.img_path}", alt: "Poster"}
              %h3
                %td= link_to '', movie, method: :delete, confirm: 'Are you sure?', class: 'glyphicon glyphicon-remove'
                -if current_user.favourite_movies.exists?(id: movie.id) 
                  %td= link_to '', favourite_movie_path(id: movie.id), method: :delete, class: 'glyphicon glyphicon-star'
                -else 
                  %td= link_to '', favourite_movies_path(id: movie.id), method: :post, class: 'glyphicon glyphicon-star-empty'
            -else # View for non-saved movies (homepage, search)
              -if movie.poster_path 
                %img{src: "#{@root_path}w300_and_h450_bestv2#{movie.poster_path}", alt: "Poster"}
              -else # If poster is missing use a placeholder
                %img{src: "https://via.placeholder.com/300x450", alt: "Poster"}
              %h5 
              Average vote:           
              %span.badge.badge_default= "#{movie.vote_average}/10"